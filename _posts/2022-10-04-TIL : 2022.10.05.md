---
title: TIL - C++/2022.10.05
categories: [TIL, C++]
tags: [TIL,C++]     # TAG names should always be lowercase
---

# Learning Rvalue and Lvalue in reference

Last Postingì—ì„œ Data Structure 5ë²ˆì— ëŒ€í•œ ê³ ì°°(ğŸ˜†)ì„ ì—…ë¡œë“œí–ˆëŠ”ë°,  ê³¼ì œ ì œì¶œì„ ìœ„í•´ ë” ì•Œì•„ë³´ë©° ìƒˆë¡­ê²Œ ì•Œê²Œ ëœ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì‹œ í•œ ë²ˆ ì‘ì„±í•´ë³´ë ¤ í•œë‹¤. ğŸ˜Š 

### Error code

First, Letâ€™s see the problem code !

```cpp
#include <iostream>
using namespace std;

int main(int argac, char** argv)
{
  int y=1;
  int *& ry = &y;
  cout <<ry<<endl;
  return 0;
}
```

â†’ <font color="#FF0000"> Error occurs ! ! ! </font>

![image](https://user-images.githubusercontent.com/105411918/193863378-d6cc0408-4341-4b59-879c-606b4c12a627.png)


â†’ The error says that <non-const lvalue reference to type â€˜int*â€™ cannot bind to a temporary of type â€˜int *â€™>

---

### What is the code is representing ? ğŸ˜

It seems to represent <font color="#3DB7CC"> â€œReference to the pointer variableâ€, because it uses â€œ*&â€ </font>

â†’ `*&` ì„ ë³´ì•„ ìœ„ì˜ ì½”ë“œëŠ” í¬ì¸í„° ë³€ìˆ˜ì— ëŒ€í•œ ì°¸ì¡°ì(reference)ì— ëŒ€í•´ ë‚˜íƒ€ë‚´ê³ ìˆë‹¤. (&ì„ í†µí•´ ì°¸ì¡°í•˜ëŠ” ê²ƒì„ ì¸ì‹, *ì„ í†µí•´ í¬ì¸í„° ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒì„ ì¸ì‹)

---

### Lvalue and Rvalue

To analyze above code and error, we should know the concept of Lvalue and Rvalue !

â†’ ìœ„ì˜ ì½”ë“œì™€ ì—ëŸ¬ë¥¼ ë¶„ì„í•˜ê¸° ìœ„í•´ì„œ, ìš°ë¦¬ëŠ” <font color="#2F9D27"><Lvalue> </font>
ì™€ <font color="#FF8224"><Rvalue> </font>ì˜ ê°œë…ì„ ì•Œì•„ì•¼í•œë‹¤.

- **<font color="#2F9D27"> <Lvalue> </font>**
    - <font color="#2F9D27"> <Lvalue> </font> means an object that has an identifiable location in memory(â†’ having an address)  // <font color="#2F9D27"> <Lvalue> </font>ëŠ” ë©”ëª¨ë¦¬ì— ìœ„ì¹˜ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ëŒ€ìƒ
    - Its reference is <font color="#2F9D27">â€˜&â€™</font>
- **<font color="#FF8224"><Rvalue></font>**
    - <font color="#FF8224"><Rvalue></font> means an object that has no identifiable location in memory //rvalueëŠ” ë©”ëª¨ë¦¬ì— ìœ„ì¹˜ë¥¼ ì‹ë³„í•  ìˆ˜ ì—†ëŠ” ëŒ€ìƒ(ë©”ëª¨ë¦¬ì— ì €ì¥X)
    - Its reference is <font color="#FF8224">â€˜&&â€™</font>

â‡’ <font color="#2F9D27"><Lvalue></font> can appear on the left of an assignment operator while <font color="#FF8224"><Rvalue></font> can appear on the right

~ ì¦‰ ì‰½ê²Œ ì„¤ëª…í•˜ë©´ assignmentì—ì„œ (=)ì˜ ì™¼ìª½ì— ì˜¬ ìˆ˜ ìˆëŠ” ê²ƒì´ lvalueì´ê³ , ì˜¤ë¥¸ìª½ì—ë§Œ ì˜¬ ìˆ˜ ìˆëŠ” ê²ƒì´ rvalueì´ë‹¤. (lvalueëŠ” ë•Œì— ë”°ë¼ ì˜¤ë¥¸ìª½ì— ì˜¬ ìˆ˜ë„ ìˆìŒ !)

for example)

```cpp
int x=100 // x is lvalue and y is rvalue
int y=x // y is lvalue and y is also lvalue
```

Can you understand ? ì—¬ê¸°ê¹Œì§€ ì´í•´ê°€ ê°€ì‹œë‚˜ìš”? ğŸ˜ 

we can obtain more realization in this website

[lvalue and rvalue in C language - GeeksforGeeks](https://www.geeksforgeeks.org/lvalue-and-rvalue-in-c-language/)

---

### Return to the code

![image](https://user-images.githubusercontent.com/105411918/193864992-6f9a7dd1-2ecb-4914-8398-84ae94d146fc.png)


```cpp
#include <iostream>
using namespace std;

int main(int argac, char** argv)
{
  int y=1; // y is lvalue , 1 is rvalue
  int *& ry = &y;  //error line !!!
				// *& ry is reference of lvalue, &y is rvalue (address of y)
  cout <<ry<<endl;
  return 0;
}
```

Letâ€™s see the error line ! errorê°€ ë°œìƒí•˜ëŠ” lineì„ ë³´ì.

```cpp
int *& ry = &y;
```

<font color="#2F9D27">â€˜*&ryâ€™</font> is the reference of <font color="#2F9D27"><Lvalue></font>, especially pointer variable because of â€˜*â€™.  

But, <font color="#FF8224">â€˜&yâ€™</font> is <font color="#FF8224"><Rvalue></font> !

`*&ry`ëŠ” ë¶„ëª…íˆ <font color="#2F9D27"><Lvalue></font>ì¸ í¬ì¸í„°ë³€ìˆ˜ì— ëŒ€í•œ ì°¸ì¡°ìë¡œ ì“°ì—¬ì•¼í•˜ëŠ”ë°,

`&y`ëŠ” <font color="#FF8224"><Rvalue></font>ì´ë‹¤.

ì•ì„œ <font color="#FF8224"><Rvalue></font>ì— ëŒ€í•œ ì°¸ì¡°ìëŠ” `&&`ì´ë©°, <Lvalue>ì— ëŒ€í•œ ì°¸ì¡°ìê°€ `&`ë¼ê³  ì„¤ëª…í•œ ê²ƒì„ ë³´ì•„, errorê°€ ë°œìƒí•  ìˆ˜ë°–ì— ì—†ìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.

---

### Solution

 1. use â€˜&&â€™ whicjh is tjhe reference of <font color="#FF8224"><Rvalue></font>

```cpp
int *&&ry = &y; // &y is rvalue and && is reference to rvalue
```

 2. make â€˜&yâ€™ to <font color="#2F9D27"><Lvalue></font>

```cpp
int *k = &y; // k is lvalue, &y is rvalue
int *&ry = k; // k is lvalue and & is reference to lvalue
```

In this way, error doesnâ€™t occur.

The result would be the address of â€˜yâ€™

---

### Finally : analyze the error code

![image](https://user-images.githubusercontent.com/105411918/193865055-5f1e4df8-ab08-455c-9c1a-5d0fe979c3ae.png)


Letâ€™s see the error code.

â†’ <font color="#FF0000"> error : </font>  non-const lvalue reference to type â€˜int *â€™ cannot bind to a temporary of type â€˜int *â€™

error ë¬¸ì¥ì„ ë¶„ì„í•´ë³´ë©´,

non-const lvalue referenceëŠ” `&` ì„ ì´ì•¼ê¸°í•œë‹¤. non-constë¼ëŠ” ë§ì€ constë¡œ ë§Œë“¤ë©´ lvalue referenceë„ ì‚¬ìš© ê°€ëŠ¥í•œë°, ê·¸ë ‡ê²Œ í•˜ì§€ ì•Šì•˜ê¸°ë•Œë¬¸ì— lvalue referenceëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŒì„ ì´ì•¼ê¸°í•œë‹¤. (non-constì— ëŒ€í•´ì„œëŠ” ê¹Šê²Œ ì´ì•¼ê¸° í•  ë¶€ë¶„ì´ ì•„ë‹ˆë‹¤)

to type â€˜int *â€™ì€ í¬ì¸í„° ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ”ê²ƒì´ê¸°ë•Œë¬¸ì— ë‚˜ì˜¨ ê²ƒìœ¼ë¡œ, ë§Œì•½ just ì •ìˆ˜ë¥¼ ì°¸ì¡°í–ˆë‹¤ë©´ â€˜intâ€™ë¼ ëœ° ê²ƒì´ë‹¤.

temporaryëŠ” rvalueë¥¼ ì´ì•¼ê¸°í•œë‹¤.

ì¦‰, lvalueì˜ referenceì¸ `&` ë¡œëŠ” rvalueë¥¼ bind(ë¬¶ë‹¤, ì—®ë‹¤) í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ëœ¬ ê²ƒì„ ë¶„ì„í•  ìˆ˜ ìˆë‹¤.

---

### <font color="#3DB7CC">Find solution from the</font> <font color="#FF0000">error</font> !

ì§€ê¸ˆê» error codeì— ëŒ€í•´ ê·¸ë¦¬ ê¹Šì€ ì£¼ì˜ë¥¼ ê¸°ìš¸ì¸ ì ì€ ì—†ì—ˆë‹¤. 

í”„ë¡œê·¸ë˜ë°ì— ì…ë¬¸í•œ ì§€ ì–¼ë§ˆ ë˜ì§€ ì•Šì•„ í”„ë¡œê·¸ë˜ë° ìš©ì–´ë¥¼ ì˜ ëª¨ë¥´ê¸°ë„ í–ˆê³ , ê¸°ë³¸ì ìœ¼ë¡œ ì˜ì–´ë¥¼ ì˜ ëª»í•˜ê¸° ë•Œë¬¸ë„ ìˆì—ˆë‹¤. 

ê·¸ëŸ¬ë‚˜ ì´ë²ˆ ê³¼ì œë¥¼ í•´ê²°í•˜ë©´ì„œ, error codeì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ë‹¤. error codeë¥¼ ë¶„ì„í•˜ê³  ê³µë¶€í•˜ëŠ” ê³¼ì •ì—ì„œ ìƒˆë¡œìš´ ê°œë…ì¸ lvalueì™€ rvalueì— ëŒ€í•´ ì•Œê²Œ ë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.

<font color="#3DB7CC">ì•ìœ¼ë¡œëŠ” error codeë„ í—ˆíˆ¬ë¡œ ë³´ì§€ ë§ê³ , ìŠ¤ìŠ¤ë¡œ ìƒê°í•´ë³´ê³ , ë‹µì„ ì°¾ê¸° ìœ„í•´ êµ¬ê¸€ë§ì„ í•˜ëŠ” ë…¸ë ¥ë„ í•„ìš”í•¨ì„ ìŠì§€ ë§ì !</font>
